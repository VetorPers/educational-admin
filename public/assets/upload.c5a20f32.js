var e=Object.defineProperty,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(r,a,o)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o;import{g as t}from"./index.8c27f3b6.js";import{E as i,D as l,a as n,y as p,d,e as u,t as c,r as m,o as f,f as v,p as g,q as y}from"./vendor.456c50f4.js";const h=e=>i({url:"/api/video/addVideo",method:"post",data:e}),b=e=>i({url:"/api/video/videoList",method:"get",params:e}),w=e=>i({url:"/api/video/updateVideo",method:"post",data:e}),j=e=>i({url:"/api/video/deleteVideo",method:"post",data:{id:e}});const k={name:"upload",props:{type:{type:String,default:"image"},limit:{type:Number,default:1},size:{type:Number},initUrl:{type:String,default:""}},components:{ElMessage:l},setup(e,i){const m={image:["image/png","image/jpeg"],video:["video/mp4"]},f=n({fileList:[]}),v=p(e.initUrl),g=p(t({name:"token"}));d((()=>{})),u((()=>{}));const y=c(f);return((e,t)=>{for(var i in t||(t={}))a.call(t,i)&&s(e,i,t[i]);if(r)for(var i of r(t))o.call(t,i)&&s(e,i,t[i]);return e})({token:g,url:v,props:e,removeImg:(e,r)=>{f.fileList=[],v.value=""},uploadError:(e,r,a)=>{if(e.message&&401==JSON.parse(e.message).code)return l.warning("登录已过期，请重新登录"),void router.push("/login");l.error("上传失败")},beforeUpload:r=>{const{type:a,size:o}=r,s=a.split("/")[0];if(!s||s!=e.type)return l.warning("文件格式不正确"),!1;if(!m[s])return l.warning("文件格式不正确"),!1;if(-1==m[s].findIndex((e=>e==a)))return l.warning(`只能上传${m[s].join("、")}格式！`),!1;return o>1048576*e.size?(l.warning(`大小不能超过${e.size}M！`),!1):r.name},handleSuccess:(e,r)=>{v.value=e.data.url,i.emit("upSuccess",e.data.url),l.success("上传成功！")}},y)}},O={class:"hello"},S=["src"],E=["src"],I={key:2,class:"el-icon-plus avatar-uploader-icon"};k.render=function(e,r,a,o,s,t){const i=m("el-upload");return f(),v("div",O,[g(i,{class:"avatar-uploader",action:"/api/base/upload/","show-file-list":!1,"on-success":o.handleSuccess,"before-upload":o.beforeUpload,"on-error":o.uploadError,"on-remove":o.removeImg,"file-list":e.fileList,limit:o.props.limit,headers:{token:o.token}},{default:y((()=>["image"==o.props.type&&o.url?(f(),v("img",{key:0,style:{width:"100%",height:"100%"},src:o.url,class:"avatar"},null,8,S)):"video"==o.props.type&&o.url?(f(),v("video",{key:1,style:{width:"100%",height:"100%"},src:o.url,class:"avatar"},null,8,E)):(f(),v("i",I))])),_:1},8,["on-success","before-upload","on-error","on-remove","file-list","limit","headers"])])},k.__scopeId="data-v-c24897c6";export{k as _,h as a,j as d,w as u,b as v};

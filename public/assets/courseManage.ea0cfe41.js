import{m as e,y as a,d as t,r as l,L as o,o as s,c as r,q as d,g as i,p as n,M as c,w as u,f as p,F as m,h as v,D as g,j as _,a as b,k as f,_ as h}from"./vendor.456c50f4.js";import{_ as k}from"./editCourse.8e98b091.js";import{s as C,c as y,t as x,d as w}from"./api.b925597d.js";import"./index.4a156f7e.js";const z={class:"dialog-footer"},V={__name:"createBill",props:{course_id:Number,dialogVisible:Boolean},emits:["close"],setup(b,{emit:f}){const h=b;e();const k=a(!1),x=a(null),w=a({idArr:[]}),V=a([{id:1,name:"学生1"},{id:2,name:"学生2"}]),j=()=>{x.value.validate().then((()=>{k.value=!0;const e={course_id:h.course_id,student_ids:w.value.idArr.join(",")};y(e).then((e=>{g.success("提交成功"),k.value=!1,B("success")})).catch((()=>{g.error("提交失败"),k.value=!1}))})).catch((e=>{}))},A=()=>{B("")},B=e=>{f("close",e)};return t((()=>{C({page:1,per_page:1e3,course_id:h.course_id}).then((e=>{V.value=e.data.data})).catch((e=>{V.value=[{id:1,name:"学生1"},{id:2,name:"学生2"},{id:3,name:"学生3"},{id:4,name:"学生4"}],g.error(e.msg)}))})),(e,a)=>{const t=l("el-checkbox"),g=l("el-checkbox-group"),f=l("el-form-item"),h=l("el-form"),C=l("el-button"),y=l("el-dialog"),D=o("loading");return s(),r(y,{title:"创建账单","model-value":b.dialogVisible,onClose:A,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:d((()=>[i("span",z,[n(C,{onClick:a[1]||(a[1]=e=>B("")),size:"small"},{default:d((()=>[c("取 消")])),_:1}),n(C,{type:"primary",onClick:j,size:"small"},{default:d((()=>[c("确 定")])),_:1})])])),default:d((()=>[u((s(),p("div",null,[n(h,{ref_key:"formRef",ref:x,model:w.value,"label-width":"100px"},{default:d((()=>[n(f,{label:"选择学生:",prop:"idArr"},{default:d((()=>[n(g,{modelValue:w.value.idArr,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.idArr=e)},{default:d((()=>[(s(!0),p(m,null,v(V.value,(e=>(s(),r(t,{key:e.id,label:e.id},{default:d((()=>[c(_(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),[[D,k.value]])])),_:1},8,["model-value"])}},__scopeId:"data-v-67061011"};const j={class:"btn-wrap g-flex-end"},A={class:"g-ellipsis"},B={class:"footer-wrap g-flex-end"},D={__name:"courseManage",setup(e){const m=a(!1),v=a([]),C=b({total:0,size:10,current:1}),y=a(!1),z=a(!1),D=a({}),M=a({});t((()=>{I()}));const I=()=>{m.value=!0;const e={page:C.current,per_page:C.size};x(e).then((e=>{v.value=e.data.data,C.total=e.data.total})).catch((e=>{v.value=[{id:2,teacher_id:1,name:"数学",period:"2023/10-2024/02",charge:100,description:"aaa",created_at:"2025-04-11 11:01:20",updated_at:"2025-04-11 11:01:22",deleted_at:null,teacher:null,students:[]},{id:1,teacher_id:1,name:"语文",period:"2023/10-2024/02",charge:200.2,description:"cccc",created_at:"2025-04-11 02:30:11",updated_at:"2025-04-11 02:47:06",deleted_at:null,teacher:null,students:[{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"},{id:1,name:"aaa",avatar:"http://127.0.0.1:8093/storage/images/b88dece5d6b71964c6c7172b10ef4928_v1.png"}]}],g.error(e.msg)})).finally((()=>{m.value=!1}))},N=()=>{M.value={},y.value=!0},O=e=>{y.value=!1,"success"===e&&I()},T=e=>{z.value=!1,"success"===e&&I()},q=e=>{C.size=e,C.current=1,I()},E=e=>{C.current=e,I()};return(e,a)=>{const t=l("el-button"),b=l("el-empty"),x=l("el-table-column"),F=l("el-tooltip"),L=l("el-table"),P=l("el-pagination"),R=o("loading");return s(),p("div",null,[i("div",j,[n(t,{size:"small",onClick:I},{default:d((()=>[c("刷 新")])),_:1}),n(t,{type:"primary",size:"small",onClick:N},{default:d((()=>[c("添 加")])),_:1})]),u((s(),r(L,{data:v.value,border:"",style:{width:"100%"}},{empty:d((()=>[n(b,{description:"暂无数据"})])),default:d((()=>[n(x,{prop:"name",label:"课程名","min-width":"200px"}),n(x,{prop:"period",label:"日期"}),n(x,{prop:"charge",label:"费用"}),n(x,{prop:"description",label:"描述"}),n(x,{prop:"studentName",label:"学生姓名"},{default:d((e=>[n(F,{placement:"bottom"},{content:d((()=>[c(_(e.row.students.map((e=>e.name)).join(", ")),1)])),default:d((()=>[i("div",A,_(e.row.students.map((e=>e.name)).join(", ")),1)])),_:2},1024)])),_:1}),n(x,{label:"操作"},{default:d((e=>[n(t,{type:"text",onClick:a=>{return t=e.row,M.value=t,void(y.value=!0);var t}},{default:d((()=>[c("修 改")])),_:2},1032,["onClick"]),n(t,{type:"text",onClick:a=>{return t=e.row,D.value=t,void(z.value=!0);var t}},{default:d((()=>[c("创建账单")])),_:2},1032,["onClick"]),n(t,{type:"text",onClick:a=>{return t=e.row.id,void h.confirm("确认删除？","",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,closeOnPressEscape:!1}).then((()=>{m.value=!0,w(t).then((e=>{g.success("删除成功"),I()})).catch((e=>{g.error("删除失败"),m.value=!1}))}));var t}},{default:d((()=>[c("删 除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[R,m.value]]),i("div",B,[n(P,{layout:"prev, pager, next",total:C.total,"current-page":C.current,"page-size":C.size,onSizeChange:q,onCurrentChange:E},null,8,["total","current-page","page-size"])]),y.value?(s(),r(k,{key:0,nowData:M.value,dialogVisible:y.value,onClose:O},null,8,["nowData","dialogVisible"])):f("",!0),z.value?(s(),r(V,{key:1,course_id:D.value.id,dialogVisible:z.value,onClose:T},null,8,["course_id","dialogVisible"])):f("",!0)])}},__scopeId:"data-v-013b1094"};export{D as default};

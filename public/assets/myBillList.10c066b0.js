import{y as e,a as t,d as a,e as n,D as o,r,L as s,o as c,f as i,w as l,c as u,q as d,g as p,p as m,M as y,j as f}from"./vendor.456c50f4.js";import{g as h}from"./api.b925597d.js";import"./index.4a156f7e.js";const _={class:"footer-wrap g-flex-end"},g={__name:"myBillList",setup(g){const b=e(!1),v=e([]),C=t({total:0,size:10,current:1});e(!1),e({}),a((()=>{j()})),n((()=>{const e=document.createElement("script");e.src="https://cdn.omise.co/omise.js",e.onload=()=>{Omise.configure({publicKey:"your-public-key"}),document.getElementById("pay-button").addEventListener("click",(function(){OmiseCard.createToken("card-number",(function(e,t){200==e&&fetch("/process-payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardToken:t.id})}).then((function(e){return e.json()})).then((function(e){}))}))}))},document.head.appendChild(e)}));const j=()=>{b.value=!0;const e={page:C.current,per_page:C.size};h(e).then((e=>{v.value=e.data.data,C.total=e.data.total})).catch((e=>{v.value=[{id:1,order_no:"aaa",student_id:1,teacher_id:1,course_id:1,amount:20,status:0,pay_status:0,pay_time:null,pay_info:null,created_at:null,updated_at:null,teacher:null,student:{id:1,name:"aaa"},course:{id:1,name:"语文",period:"202310",charge:200.2,description:"cccc"},status_text:"待发送",pay_status_text:"未支付"}],o.error(e.msg)})).finally((()=>{b.value=!1}))},k=e=>{C.size=e,C.current=1,j()},x=e=>{C.current=e,j()};return(e,t)=>{const a=r("el-empty"),n=r("el-table-column"),o=r("el-button"),h=r("el-table"),g=r("el-pagination"),j=s("loading");return c(),i("div",null,[l((c(),u(h,{data:v.value,border:"",style:{width:"100%"}},{empty:d((()=>[m(a,{description:"暂无数据"})])),default:d((()=>[m(n,{prop:"order_no",label:"订单号"}),m(n,{prop:"name",label:"课程名","min-width":"200px"},{default:d((e=>[y(f(e.row.course.name),1)])),_:1}),m(n,{prop:"pay_status_text",label:"支付状态"}),m(n,{prop:"count",label:"费用"},{default:d((e=>[y(f(e.row.course.charge),1)])),_:1}),m(n,{label:"操作"},{default:d((e=>[m(o,{type:"text",onClick:t=>(e.row.id,Omise.configure({publicKey:"your-public-key"}),void OmiseCard.createToken("card-number",(function(e,t){200==e?fetch("/process-payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardToken:t.id})}).then((function(e){return e.json()})).then((function(e){})):b.value=!0})))},{default:d((()=>[y("支 付")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[j,b.value]]),p("div",_,[m(g,{layout:"prev, pager, next",total:C.total,"current-page":C.current,"page-size":C.size,onSizeChange:k,onCurrentChange:x},null,8,["total","current-page","page-size"])])])}},__scopeId:"data-v-77d1e20e"};export{g as default};
